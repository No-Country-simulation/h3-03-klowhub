FROM node:18

WORKDIR /app

ENV NEXT_PUBLIC_COURSES_URL=http://3.15.221.22:3003/courses
ENV NEXT_PUBLIC_PROJECTS_URL=http://3.145.74.63:3002/projects
ENV NEXT_PUBLIC_APPLICATIONS_URL=http://3.145.74.63:3005/apps
ENV NEXT_PUBLIC_USERS_URL=http://3.145.74.63:3001/users
ENV NEXT_PUBLIC_AUTH_URL=http://3.145.74.63:3001/auth
ENV NEXT_PUBLIC_CHAT_URL=http://3.15.221.22:3004/chat

ENV NEXT_PUBLIC_TRELLO_API_KEY=bae1782c8d2dadeb6f3b2795de10a447
ENV NEXT_PUBLIC_TRELLO_API_TOKEN=ATTA45f29f291a3952b22b93e4d18c873211c34d38246af642f1e0a63d753a368edc392B6203

COPY . .
 
RUN npm install --legacy-peer-deps
RUN npm run build

EXPOSE 3000

CMD [ "npm", "run", "start" ]
