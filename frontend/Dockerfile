FROM node:18

WORKDIR /app

ENV NEXT_PUBLIC_COURSES_URL=http://3.15.221.22:3003/courses
ENV NEXT_PUBLIC_PROJECTS_URL=http://3.145.74.63:3002/projects
ENV NEXT_PUBLIC_APPLICATIONS_URL=http://3.145.74.63:3005/apps
ENV NEXT_PUBLIC_USERS_URL=http://3.145.74.63:3001/users
ENV NEXT_PUBLIC_AUTH_URL=http://3.145.74.63:3001/auth
ENV NEXT_PUBLIC_CHAT_URL=http://3.15.221.22:3004/chat

COPY . .
 
RUN npm install --legacy-peer-deps
RUN npm run build

EXPOSE 3000

CMD [ "npm", "run", "start" ]
